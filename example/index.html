<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="author" content="liuyang">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no,viewport-fit=cover">
  <title>index</title>
  <script src="bundle.js"></script>
</head>
<body>
<div class="a">a</div>
<div class="b">b</div>
<div class="c">c</div>
<div id="root"></div>
<script>
micro.register([
  {
    name: "a",
    active: () => location.pathname.startsWith("/micro-core/example/a"),
    entry: "/micro-core/example/a.html",
    meta: {
      path: "a"
    }
  },
  {
    name: "b",
    active: () => location.pathname.startsWith("/micro-core/example/b"),
    entry: "/micro-core/example/b.html",
    meta: {
      path: "b"
    }
  },
  {
    name: "c",
    active: () => location.pathname.startsWith("/micro-core/example/c"),
    entry: "/micro-core/example/c.html",
    meta: {
      path: "c"
    }
  }
]);
micro.updateApps();
const microRouter = new micro.Router("/micro-core/example/");
microRouter.beforeEach((to, from, next) => {
  if (to !== "/a") {
    next();
  } else {
    next({
      path: "/b"
    });
  }
})
.beforeEach((to, from, next) => {
  console.log(2);
  next();
});
document.getElementsByClassName("a")[0].onclick = function () {
  microRouter.push("/a");
};
document.getElementsByClassName("b")[0].onclick = function () {
  microRouter.push("/b");
};
document.getElementsByClassName("c")[0].onclick = function () {
  microRouter.replace("/c");
};
</script>
</body>
</html>
