<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="author" content="liuyang">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no,viewport-fit=cover">
  <title>index</title>
  <script src="bundle.js"></script>
</head>
<body>
<script>

window.microRouter = micro.createRouter("/micro-core/example/");

microRouter.beforeEach(function (to, from, next) {
  if (to !== "/a") {
    next();
  } else {
    next({
      path: "/b"
    });
  }
});

window.asyncStore = micro.createAsyncStore({});

var app = micro.createRemoteApp();

app.register([
  {
    name: "appNav",
    active: function () {
      return true;
    },
    entry: "http://localhost:80/nav/"
  },
  {
    name: "appList",
    active: function () {
      return location.pathname.startsWith("/micro-core/example/list");
    },
    entry: "http://localhost:81/one/"
  },
  {
    name: "c",
    active: function () {
      return location.pathname.startsWith("/micro-core/example/c");
    },
    entry: "c.html"
  }
]);
app.update();

microRouter.afterEach((current, next) => {
  app.update();
  next();
});
</script>
</body>
</html>
